# üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞

## –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ó–∞–¥–∞—á–∞:** –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (nginx), –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (gunicorn), –æ—á–µ—Ä–µ–¥–∏ (celery) –∏ –ë–î (postgresql, redis)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```env
MONITORED_SERVICES=nginx,gunicorn,celery,postgresql,redis
SERVICE_CHECK_INTERVAL=60
```

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
1. `/status` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—â—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å–µ—Ä–≤–µ—Ä–∞
2. `/services` - —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
3. `/processes` - –Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å, –ø–æ—Ç—Ä–µ–±–ª—è—é—â–∏–π –º–Ω–æ–≥–æ CPU
4. `/logs gunicorn` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

### 2. –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

**–°–∏–º–ø—Ç–æ–º:** –°–∞–π—Ç –º–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–î–µ–π—Å—Ç–≤–∏—è:**
```
1. /status ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—â—É—é –∑–∞–≥—Ä—É–∑–∫—É
2. /cpu ‚Üí –≤—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU?
3. /memory ‚Üí –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–∞–º—è—Ç–∏?
4. /processes ‚Üí –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å –∂—Ä–µ—Ç —Ä–µ—Å—É—Ä—Å—ã?
5. /disk ‚Üí –º–æ–∂–µ—Ç –¥–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω?
```

---

### 3. –†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∞–ª–µ—Ä—Ç—ã

#### –ê–ª–µ—Ä—Ç: –°–µ—Ä–≤–∏—Å —É–ø–∞–ª
```
‚ö†Ô∏è –°–µ—Ä–≤–∏—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
üî¥ nginx
```

**–î–µ–π—Å—Ç–≤–∏—è:**
```
1. /services ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ
2. /logs nginx ‚Üí –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å
3. –ó–∞–π—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä: sudo systemctl restart nginx
```

#### –ê–ª–µ—Ä—Ç: –î–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω
```
‚ö†Ô∏è –î–∏—Å–∫ / –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ 87%
```

**–î–µ–π—Å—Ç–≤–∏—è:**
```
1. /disk ‚Üí –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –¥–∏—Å–∫–∏
2. –ó–∞–π—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä: du -h --max-depth=1 /
3. –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏: sudo journalctl --vacuum-time=7d
```

---

### 4. –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

**–£—Ç—Ä–µ–Ω–Ω–∏–π —á–µ–∫–ª–∏—Å—Ç:**
```
/status     ‚Üí –í—Å—ë –ª–∏ –≤ –ø–æ—Ä—è–¥–∫–µ?
/services   ‚Üí –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç?
/disk       ‚Üí –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞?
```

---

### 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

**–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```
1. /services ‚Üí —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª—Å—è
2. /logs your-app ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –æ—à–∏–±–∫–∏
3. /cpu ‚Üí –Ω–µ—Ç –ª–∏ –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
4. /memory ‚Üí –Ω–µ –≤—ã—Ä–æ—Å–ª–æ –ª–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
```

**–ë–æ—Ç —Å–∞–º –ø—Ä–∏—à–ª—ë—Ç:**
```
üîÑ –°–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω!
üü° gunicorn
–°—Ç–∞—Ä—ã–π PID: 1234 ‚Üí –ù–æ–≤—ã–π PID: 5678
```

---

### 6. –ù–æ—á–Ω–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7 –∏ –ø—Ä–∏—à–ª—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–∞–∂–µ –Ω–æ—á—å—é:

- üî¥ –°–µ—Ä–≤–∏—Å —É–ø–∞–ª ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è –∏ –ø–æ—á–∏–Ω–∏—Ç—å
- üîÑ –°–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª—Å—è ‚Üí –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É—Ç—Ä–æ–º –ª–æ–≥–∏
- ‚ö†Ô∏è –î–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω ‚Üí –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—á–∏—Å—Ç–∫—É
- üîÑ –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è ‚Üí –≤—ã—è—Å–Ω–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É

---

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```
/logs nginx          ‚Üí –ª–æ–≥–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
/logs postgresql     ‚Üí –ª–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
/logs gunicorn       ‚Üí –ª–æ–≥–∏ Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
/logs celery         ‚Üí –ª–æ–≥–∏ –æ—á–µ—Ä–µ–¥–µ–π
/logs docker         ‚Üí –ª–æ–≥–∏ Docker
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–∞–±–æ—á–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º

### –î–ª—è DevOps
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ `/services` –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ `/status` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/logs` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- `/processes` –ø–æ–∫–∞–∂–µ—Ç, –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã
- `/logs your-service` –ø–æ–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –æ—à–∏–±–∫–∏
- `/memory` –ø–æ–∫–∞–∂–µ—Ç, –Ω–µ —Ç–µ—á—ë—Ç –ª–∏ –ø–∞–º—è—Ç—å

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `/disk`
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞—Ö

---

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å —Ä–µ–≥—É–ª—è—Ä–Ω–æ** - `/status` –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–∞–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã** - –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ
3. **–†–µ–∞–≥–∏—Ä—É–π—Ç–µ –Ω–∞ –∞–ª–µ—Ä—Ç—ã** - –Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–≥–∏** - `/logs` –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É
5. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –¥–∏—Å–∫–∞–º–∏** - –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –¥–∏—Å–∫ = –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

1. –î–æ–±–∞–≤–ª—è—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–æ–≤ (>10) - –±—É–¥–µ—Ç —Å–ø–∞–º
2. –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –¥–∏—Å–∫–µ
3. –î–∞–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
4. –ó–∞–ø—É—Å–∫–∞—Ç—å –±–µ–∑ whitelist
5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### Skript –¥–ª—è –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∏ (–ø—Ä–∏–º–µ—Ä)

–°–æ–∑–¥–∞–π—Ç–µ bash-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø–∏–Ω–≥–æ–≤–∞—Ç—å –±–æ—Ç–∞:

```bash
#!/bin/bash
# check_bot.sh - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç

BOT_PID=$(pgrep -f "python bot.py")

if [ -z "$BOT_PID" ]; then
    echo "–ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω! –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é..."
    sudo systemctl restart tg-monitor-bot
fi
```

–î–æ–±–∞–≤—å—Ç–µ –≤ cron:
```bash
*/5 * * * * /opt/scripts/check_bot.sh
```

---

## –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤

### –ö–µ–π—Å 1: –ü–∞–º—è—Ç—å –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å
```
–°–∏–º–ø—Ç–æ–º—ã:
- –ë–æ—Ç –ø—Ä–∏—Å–ª–∞–ª: "RAM –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ 95%"
- –°–∞–π—Ç —Å—Ç–∞–ª –º–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

–î–µ–π—Å—Ç–≤–∏—è:
1. /processes ‚Üí –Ω–∞—à–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å —Å —É—Ç–µ—á–∫–æ–π –ø–∞–º—è—Ç–∏
2. /services ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å
3. /memory ‚Üí —É–±–µ–¥–∏–ª–∏—Å—å, —á—Ç–æ –ø–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–¥–∏–ª–∞—Å—å
```

### –ö–µ–π—Å 2: –î–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω –ª–æ–≥–∞–º–∏
```
–°–∏–º–ø—Ç–æ–º—ã:
- –ê–ª–µ—Ä—Ç: "–î–∏—Å–∫ / –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ 92%"
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –ª–æ–≥–∏

–î–µ–π—Å—Ç–≤–∏—è:
1. –ó–∞—à–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –ù–∞—à–ª–∏: /var/log –∑–∞–Ω–∏–º–∞–µ—Ç 80GB
3. –û—á–∏—Å—Ç–∏–ª–∏: sudo journalctl --vacuum-size=1G
4. /disk ‚Üí –ø—Ä–æ–≤–µ—Ä–∏–ª–∏, —á—Ç–æ –º–µ—Å—Ç–æ –æ—Å–≤–æ–±–æ–¥–∏–ª–æ—Å—å
```

### –ö–µ–π—Å 3: Postgresql —É–ø–∞–ª
```
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
üî¥ –°–µ—Ä–≤–∏—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω! postgresql

–î–µ–π—Å—Ç–≤–∏—è:
1. /logs postgresql ‚Üí —É–≤–∏–¥–µ–ª–∏ "disk full"
2. /disk ‚Üí –¥–∏—Å–∫ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω
3. –û—Å–≤–æ–±–æ–¥–∏–ª–∏ –º–µ—Å—Ç–æ
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∏: sudo systemctl start postgresql
5. –ü–æ–ª—É—á–∏–ª–∏: ‚úÖ –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω! postgresql
```

---

## FAQ

**Q: –ö–∞–∫ —á–∞—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å?**  
A: –†–∞–∑ –≤ –¥–µ–Ω—å `/status` –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏–¥—É—Ç —Å–∞–º–∏.

**Q: –°–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å?**  
A: –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º 3-7 —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö. –ë–æ–ª—å—à–µ 10 - –±—É–¥–µ—Ç –º–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤?**  
A: –î–∞, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

**Q: –ë–æ—Ç –±—É–¥–∏—Ç –Ω–æ—á—å—é - —á—Ç–æ –¥–µ–ª–∞—Ç—å?**  
A: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ "—Ç–∏—Ö–∏–µ —á–∞—Å—ã" –≤ Telegram –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ –ø–æ—Ä–æ–≥–∏ –∞–ª–µ—Ä—Ç–æ–≤.

**Q: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å?**  
A: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`, –¥–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–∏—Å –≤ `MONITORED_SERVICES`, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞.

